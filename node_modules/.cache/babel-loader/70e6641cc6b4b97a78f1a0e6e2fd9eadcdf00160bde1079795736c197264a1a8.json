{"ast":null,"code":"/*\n* Copyright 2013 ZXing authors\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*      http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n// package com.google.zxing.aztec;\n// import com.google.zxing.BarcodeFormat;\nimport BarcodeFormat from '../BarcodeFormat';\n// import com.google.zxing.EncodeHintType;\nimport EncodeHintType from '../EncodeHintType';\n// import com.google.zxing.aztec.encoder.Encoder;\nimport Encoder from './encoder/Encoder';\n// import com.google.zxing.common.BitMatrix;\nimport BitMatrix from '../common/BitMatrix';\n// import java.nio.charset.Charset;\nimport Charset from '../util/Charset';\n// import java.nio.charset.StandardCharsets;\nimport StandardCharsets from '../util/StandardCharsets';\n// import java.util.Map;\nimport Integer from '../util/Integer';\nimport IllegalStateException from '../IllegalStateException';\nimport IllegalArgumentException from '../IllegalArgumentException';\nimport StringUtils from '../common/StringUtils';\n/**\n * Renders an Aztec code as a {@link BitMatrix}.\n */\nvar AztecWriter = /** @class */function () {\n  function AztecWriter() {}\n  // @Override\n  AztecWriter.prototype.encode = function (contents, format, width, height) {\n    return this.encodeWithHints(contents, format, width, height, null);\n  };\n  // @Override\n  AztecWriter.prototype.encodeWithHints = function (contents, format, width, height, hints) {\n    var charset = StandardCharsets.ISO_8859_1;\n    var eccPercent = Encoder.DEFAULT_EC_PERCENT;\n    var layers = Encoder.DEFAULT_AZTEC_LAYERS;\n    if (hints != null) {\n      if (hints.has(EncodeHintType.CHARACTER_SET)) {\n        charset = Charset.forName(hints.get(EncodeHintType.CHARACTER_SET).toString());\n      }\n      if (hints.has(EncodeHintType.ERROR_CORRECTION)) {\n        eccPercent = Integer.parseInt(hints.get(EncodeHintType.ERROR_CORRECTION).toString());\n      }\n      if (hints.has(EncodeHintType.AZTEC_LAYERS)) {\n        layers = Integer.parseInt(hints.get(EncodeHintType.AZTEC_LAYERS).toString());\n      }\n    }\n    return AztecWriter.encodeLayers(contents, format, width, height, charset, eccPercent, layers);\n  };\n  AztecWriter.encodeLayers = function (contents, format, width, height, charset, eccPercent, layers) {\n    if (format !== BarcodeFormat.AZTEC) {\n      throw new IllegalArgumentException('Can only encode AZTEC, but got ' + format);\n    }\n    var aztec = Encoder.encode(StringUtils.getBytes(contents, charset), eccPercent, layers);\n    return AztecWriter.renderResult(aztec, width, height);\n  };\n  AztecWriter.renderResult = function (code, width, height) {\n    var input = code.getMatrix();\n    if (input == null) {\n      throw new IllegalStateException();\n    }\n    var inputWidth = input.getWidth();\n    var inputHeight = input.getHeight();\n    var outputWidth = Math.max(width, inputWidth);\n    var outputHeight = Math.max(height, inputHeight);\n    var multiple = Math.min(outputWidth / inputWidth, outputHeight / inputHeight);\n    var leftPadding = (outputWidth - inputWidth * multiple) / 2;\n    var topPadding = (outputHeight - inputHeight * multiple) / 2;\n    var output = new BitMatrix(outputWidth, outputHeight);\n    for (var inputY /*int*/ = 0, outputY = topPadding; inputY < inputHeight; inputY++, outputY += multiple) {\n      // Write the contents of this row of the barcode\n      for (var inputX /*int*/ = 0, outputX = leftPadding; inputX < inputWidth; inputX++, outputX += multiple) {\n        if (input.get(inputX, inputY)) {\n          output.setRegion(outputX, outputY, multiple, multiple);\n        }\n      }\n    }\n    return output;\n  };\n  return AztecWriter;\n}();\nexport default AztecWriter;","map":{"version":3,"names":["BarcodeFormat","EncodeHintType","Encoder","BitMatrix","Charset","StandardCharsets","Integer","IllegalStateException","IllegalArgumentException","StringUtils","AztecWriter","prototype","encode","contents","format","width","height","encodeWithHints","hints","charset","ISO_8859_1","eccPercent","DEFAULT_EC_PERCENT","layers","DEFAULT_AZTEC_LAYERS","has","CHARACTER_SET","forName","get","toString","ERROR_CORRECTION","parseInt","AZTEC_LAYERS","encodeLayers","AZTEC","aztec","getBytes","renderResult","code","input","getMatrix","inputWidth","getWidth","inputHeight","getHeight","outputWidth","Math","max","outputHeight","multiple","min","leftPadding","topPadding","output","inputY","outputY","inputX","outputX","setRegion"],"sources":["../../../../src/core/aztec/AztecWriter.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}